<?php
/**
 * MageUp ProductReviews module
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/AFL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to mageup.info@gmail.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade MageUp ProductReviews to newer
 * versions in the future. If you wish to customize MageUp ProductReviews for your
 * needs please refer to http://www.mageup.com for more information.
 *
 * @category    design
 * @copyright   Copyright (c) 2013 MageUp (http://www.mageup.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/** @var $this MageUp_ProductReviews_Block_Template */
$loggedIn = Mage::helper('customer')->isLoggedIn();
/** @var $helper MageUp_ProductReviews_Helper_Data */
$helper = Mage::helper('productreviews');
?>
<div class="review ui-corner-all hide-#{hide_state}" id="review_id_#{review_id}"
     onmouseover="this.addClassName('hover');" onmouseout="this.removeClassName('hover');">
    <span class="review-block show-message show-#{hide_state}"><?php echo $this->__('This review has received too many negative votes.')?>
        <a href="#"
           onclick="this.parentElement.parentElement.removeClassName('hide-#{hide_state}'); this.hide(); return false;"><?php echo $this->__('Show')?></a></span>

    <div class="rating-box right percent-#{percent}">
        <div class="rating" style="width:#{percent}%"></div>
    </div>
    <span class="review-block detail">#{detail}</span>
    <span class="review-block nickname left">#{nickname}</span>
    <span class="review-bottom thumbs-up-#{thumbs_up}"><span class="thumb-count">#{thumbs_up}</span><img
            src="<?php echo $this->getSkinUrl('images/mageup/productreviews/like.png')?>"
            alt="#{thumbs_up} <?php echo $this->__('Thumbs up')?>, #{thumbs_down} <?php echo $this->__('Thumb down')?>"
            title="#{thumbs_up} <?php echo $this->__('Thumbs up')?>, #{thumbs_down} <?php echo $this->__('Thumb down')?>"/></span>
    <span class="review-bottom thumbs-down exists-#{exists}"><a onclick="reviews.thumbs(this, 'down'); return false;"
                                                                href="<?php echo Mage::getUrl('productreviews/product/thumbs')?>id/#{review_id}/thumb/down/"
                                                                title="<?php echo $this->__('Thumb down')?>"><img
            src="<?php echo $this->getSkinUrl('images/mageup/productreviews/dislike.png')?>"
            alt="<?php echo $this->__('Thumb down')?>"/></a></span>
    <span class="review-bottom thumbs-up exists-#{exists}"><a onclick="reviews.thumbs(this, 'up'); return false;"
                                                              href="<?php echo Mage::getUrl('productreviews/product/thumbs')?>id/#{review_id}/thumb/up/"
                                                              title="<?php echo $this->__('Thumbs up')?>"><img
            src="<?php echo $this->getSkinUrl('images/mageup/productreviews/like.png')?>"
            alt="<?php echo $this->__('Thumbs up')?>"/></a></span>
    <span class="review-bottom loader-small" style="display:none;"><img
            src="<?php echo $this->getSkinUrl('images/mageup/productreviews/loader-tiny.gif')?>"
            alt="<?php echo $this->__('Please wait...')?>" title="<?php echo $this->__('Please wait...')?>"/></span>
    <span class="review-block created left">#{created_at}</span>
    <span class="review-block show-parent left has-parent-#{has_parent}"><?php echo $this->__('in reply to')?> #{parent_nickname}
        <a href="<?php echo Mage::getUrl('productreviews/product/showParent')?>parent_id/#{parent_id}"
           onclick="reviews.showParent(this);return false;"><?php echo $this->__('Show Review')?></a></span>
    <span class="review-block left" style="display:none; padding-left:5px;"><img
            src="<?php echo $this->getSkinUrl('images/mageup/productreviews/loader-tiny.gif')?>"
            alt="<?php echo $this->__('Please wait...')?>" title="<?php echo $this->__('Please wait...')?>"/></span>
<span class="review-block reply left">
    <a href="#productreviews-container"
       onclick="<?php if ($loggedIn || $helper->isGuestAllowed()): ?>reviews.reply(#{review_id}, '#{nickname}'); return false;<?php else: ?>reviews.addError('<?php echo $this->__('You need to Log In to respond.') ?>');  return false;<?php endif;?>"><?php echo $this->__('Reply')?></a>
</span>
</div>